---
apiVersion: core.k8sgpt.ai/v1alpha1
kind: K8sGPT
metadata:
  name: k8sgpt
  namespace: k8sgpt
spec:
  ai:
    enabled: true
    model: cliproxy/kimi-for-coding
    backend: openai
    baseUrl: http://bifrost.bifrost.svc:8080/v1
    anonymized: true
    language: english
    secret:
      name: k8sgpt-ai-secret
      key: api-key
    backOff:
      enabled: true
      maxRetries: 5
  noCache: false
  repository: ghcr.io/k8sgpt-ai/k8sgpt
  version: v0.4.1
  # TODO: Re-enable Trivy when operator bug is fixed
  # (nil pointer dereference in AddIntegration gRPC call)
  # integrations:
  #   trivy:
  #     enabled: true
  #     namespace: k8sgpt
  resources:
    requests:
      cpu: 100m
      memory: 128Mi
    limits:
      cpu: 500m
      memory: 512Mi
